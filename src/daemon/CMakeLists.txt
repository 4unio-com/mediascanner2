add_definitions(${MEDIASCANNER_CFLAGS} ${GST_CFLAGS})
include_directories(..)

add_library(scannerstuff STATIC
  InvalidationSender.cc
  MetadataExtractor.cc
  SubtreeWatcher.cc
  Scanner.cc
  util.cc
)

target_link_libraries(scannerstuff ${GST_LIBRARIES})

add_executable(scannerdaemon
  scannerdaemon.cc
)

set_target_properties(scannerdaemon
  PROPERTIES OUTPUT_NAME "mediascanner-service-2.0")

target_link_libraries(scannerdaemon
  mediascanner
  scannerstuff
)

install(
  TARGETS scannerdaemon
  RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
)
